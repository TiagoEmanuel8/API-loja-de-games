generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model products {
  id             Int              @id @default(autoincrement())
  name           String           @unique(map: "name") @db.VarChar(100)
  type           String           @db.VarChar(30)
  price          Decimal          @db.Decimal(4, 2)
  url_image      String           @default("") @db.VarChar(200)
  sales_products sales_products[]
}

model sales {
  id                           Int              @id @default(autoincrement())
  user_id                      Int
  seller_id                    Int
  total_price                  Decimal          @db.Decimal(9, 2)
  sale_date                    DateTime         @db.DateTime(0)
  status_sale                  String           @db.VarChar(50)
  users_sales_user_idTousers   users            @relation("sales_user_idTousers", fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "sales_ibfk_1")
  users_sales_seller_idTousers users            @relation("sales_seller_idTousers", fields: [seller_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "sales_ibfk_2")
  sales_products               sales_products[]

  @@index([seller_id], map: "seller_id")
  @@index([user_id], map: "user_id")
}

model sales_products {
  sale_id    Int
  product_id Int
  quantity   Int
  sales      sales    @relation(fields: [sale_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "sales_products_ibfk_1")
  products   products @relation(fields: [product_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "sales_products_ibfk_2")

  @@id([sale_id, product_id])
  @@index([product_id], map: "product_id")
}

model users {
  id                           Int     @id @default(autoincrement())
  name                         String  @db.Text
  email                        String  @unique(map: "email_un") @db.VarChar(100)
  password                     String  @db.VarChar(160)
  cpf                          Int
  mobile_number                Int?
  address                      String  @db.VarChar(100)
  address_number               Int?
  district                     String  @db.Text
  city                         String  @db.TinyText
  state                        String  @db.TinyText
  country                      String  @db.TinyText
  cep                          Int
  role                         String  @db.TinyText
  sales_sales_user_idTousers   sales[] @relation("sales_user_idTousers")
  sales_sales_seller_idTousers sales[] @relation("sales_seller_idTousers")
}
